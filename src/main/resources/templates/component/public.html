<!--wrapper中所需css-->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--图标显示-->
	<link rel="icon" href="/static/picture/favicon.ico" type="image/png" />
	<!--plugins-->
	<link href="/static/plugins/vectormap/jquery-jvectormap-2.0.2.css" rel="stylesheet"/>
	<link href="/static/plugins/simplebar/css/simplebar.css" rel="stylesheet" />
	<link href="/static/plugins/perfect-scrollbar/css/perfect-scrollbar.css" rel="stylesheet" />
	<link href="/static/plugins/metismenu/css/metisMenu.min.css" rel="stylesheet" />
	<!--plugins-->
	<link rel="stylesheet" href="/static/plugins/notifications/css/lobibox.min.css" />
	<!-- Bootstrap CSS -->
	<link href="/static/css/bootstrap.min.css" rel="stylesheet">
	<link href="/static/css/app.css" rel="stylesheet">
	<link href="/static/css/icons.css" rel="stylesheet">
	<!-- loader-->
	<link href="/static/css/pace.min.css" rel="stylesheet" />
	<script src="/static/js/pace.min.js"></script>
	<!-- Theme Style CSS -->
	<link rel="stylesheet" href="/static/css/dark-theme.css" />
	<link rel="stylesheet" href="/static/css/semi-dark.css" />
	<link rel="stylesheet" href="/static/css/header-colors.css" />
	<style>
		.menuClassHidedisplay{
			display: none;
		}
		.menuClassHide{
			opacity: 0;
			transition: opacity 0.5s ease-in-out;
		}
		.menuClassShow{
			opacity: 1;
		}
	</style>
</head>
<!--wrapper中结构-->
<div class="wrapper"  th:fragment="fixed-public">
	<!-- 侧边栏 -->
	<div class="sidebar-wrapper" data-simplebar="true" th:fragment="siderbar">
		<!--	侧边栏顶部-->
		<div class="sidebar-header" th:fragment="sidebar-logo">
			<div>
				<img src="/static/picture/logo_G.png" class="logo-icon" alt="logo icon">
			</div>
			<div>
				<h4 class="logo-text">GEN</h4>
			</div>
			<div class="toggle-icon ms-auto"><i class='bx bx-arrow-to-left'></i>
			</div>
		</div>
		<!--	侧边栏底部-->
		<ul class="metismenu" id="menu" th:fragment="sidebar-bottom">
			<li>
				<!--大标题-->
				<a href="#" class="has-arrow">
					<div class="parent-icon"><i class='bx bx-home-circle'></i>
					</div>
					<div class="menu-title">首页</div>
				</a>
				<!--
				 标题下元素显示添加元素方式	-->
				<ul class="menuClassHidedisplay">
					<!--<li> <a href="/index"><i class="bx bx-right-arrow-alt"></i>返回首页</a>
					</li>-->
					<li> <a href="/userprofile"><i class="bx bx-right-arrow-alt"></i>个人信息</a>
					</li>
					<li shiro:hasRole="admin"> <a href="/manageuser"><i class="bx bx-right-arrow-alt"></i>管理用户</a>
					</li>
					<li shiro:hasRole="admin"> <a href="/logging/showAllEvent"><i class="bx bx-right-arrow-alt"></i>日志显示</a>
					</li>
				</ul>
			</li>
			<li>
				<a href="javascript:;" class="has-arrow">
					<div class="parent-icon"><i class="bx bx-category"></i>
					</div>
					<div class="menu-title">文件管理</div>
				</a>
				<ul class="menuClassHidedisplay">
					<li> <a href="/uploadfile"><i class="bx bx-right-arrow-alt"></i>上传</a>
					</li>
					<li> <a href="/fileManager"><i class="bx bx-right-arrow-alt"></i>文件管理</a>
					</li>
				</ul>
			</li>
			<li>
				<a href="javascript:;" class="has-arrow">
					<div class="parent-icon"><i class="bx bx-chat"></i>
					</div>
					<div class="menu-title">通信</div>
				</a>
				<ul class="menuClassHidedisplay">
					<li> <a href="/chat"><i class="bx bx-right-arrow-alt"></i>聊天</a></li>
					<li> <a href="#"><i class="bx bx-right-arrow-alt"></i>通知</a></li>
					<li> <a href="#"><i class="bx bx-right-arrow-alt"></i>分享</a></li>
				</ul>
			</li>
			<li>
				<a class="has-arrow" href="javascript:;">
					<div class="parent-icon"><i class="bx bx-repeat"></i>
					</div>
					<div class="menu-title">功能</div>
				</a>
				<ul class="menuClassHidedisplay">
					<li shiro:hasRole="admin"> <a href="/formTextEditor"><i class="bx bx-right-arrow-alt"></i>系统信息发送</a>
					</li>
				</ul>
			</li>
			<!--
			<li>
			第二种
				<a href="widgets.html">
					<div class="parent-icon"><i class='bx bx-cookie'></i>
					</div>
					<div class="menu-title">Widgets</div>
				</a>
			</li>
			-->
		</ul>
	</div>
	<!-- 头部栏 -->

	<header th:fragment="top">
		<!-- 通知提示框 -->
		<div class="modal" id="myModal">
			<div class="modal-dialog">
				<div class="modal-content">

					<!-- 模态框头部 -->
					<div class="modal-header">
						<h4 id="modal_title" class="modal-title"></h4>
					</div>

					<!-- 模态框内容 -->
					<div id="model_body" class="modal-body">
					</div>

					<!-- 模态框底部 -->
					<div id="modal_footer" class="modal-footer">
					</div>

				</div>
			</div>
		</div>

		<div class="topbar d-flex align-items-center">
			<nav class="navbar navbar-expand">
				<div class="mobile-toggle-menu"><i class='bx bx-menu'></i>
				</div>
				<div class="search-bar flex-grow-1">
					<div class="position-relative search-bar-box">
						<input type="text" class="form-control search-control" placeholder="搜索"> <span class="position-absolute top-50 search-show translate-middle-y"><i class='bx bx-search'></i></span>
						<span class="position-absolute top-50 search-close translate-middle-y"><i class='bx bx-x'></i></span>
					</div>
				</div>
				<!--
					通知和信息图标
				-->
				<div class="top-menu ms-auto">

					<ul class="navbar-nav align-items-center">
						<!--通知图标-->
						<li class="nav-item dropdown dropdown-large">
							<a class="nav-link dropdown-toggle dropdown-toggle-nocaret position-relative" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"> <span id="UnreadNotificationNumber" class="alert-count">0</span>
								<i class='bx bx-bell'></i>
							</a>
							<div class="dropdown-menu dropdown-menu-end" >
								<a href="javascript:;">
									<div class="msg-header">
										<p class="msg-header-title">通知</p>
									</div>
								</a>
								<!--通知主体-->
								<div id="header-notifications" class="header-notifications-list" style="overflow:auto">
								</div>
							</div>
						</li>

						<!--信息图标-->

						<li class="nav-item dropdown dropdown-large">
							<a class="nav-link dropdown-toggle dropdown-toggle-nocaret position-relative" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"> <span id="UnReadNumber" class="alert-count">0</span>
								<i class='bx bx-comment'></i>
							</a>
							<div class="dropdown-menu dropdown-menu-end" >
								<a href="javascript:;">
									<div class="msg-header">
										<p class="msg-header-title">未读信息</p>
									</div>
								</a>
								<div id="header-message" class="header-message-list" style="overflow:auto">
								</div>

							</div>
						</li>
					</ul>
				</div>
				<!--	个人头像设置				-->
				<div class="user-box dropdown">
					<a class="d-flex align-items-center nav-link dropdown-toggle dropdown-toggle-nocaret" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
						<img src="/static/picture/logo_G.png" class="user-img" id="user-img" alt="加载失败">
						<div class="user-info ps-3">
							<p class="user-name mb-0" id="user-name"></p>
							<p class="designattion mb-0" id="designattion"></p>
						</div>
					</a>
					<ul class="dropdown-menu dropdown-menu-end">
						<li><a class="dropdown-item" href="/userprofile"><i class="bx bx-user"></i><span>个人信息</span></a>
						</li>
						<li><a class="dropdown-item" href="javascript:;"><i class="bx bx-cog"></i><span>设置</span></a>
						</li>
						<li>
							<div class="dropdown-divider mb-0"></div>
						</li>
						<li><a class="dropdown-item" href="/logout"><i class='bx bx-log-out-circle'></i><span>退出登录</span></a>
						</li>
					</ul>
				</div>
			</nav>
		</div>
	</header>
	<!--侧边设置换色-->
	<div class="switcher-wrapper" th:fragment="change-color"5>
		<div class="switcher-btn"> <i class='bx bx-cog bx-spin'></i>
		</div>
		<div class="switcher-body">
			<div class="d-flex align-items-center">
				<h5 class="mb-0 text-uppercase">自定义主题</h5>
				<button type="button" class="btn-close ms-auto close-switcher" aria-label="Close"></button>
			</div>
			<hr/>
			<h6 class="mb-0">主题样式</h6>
			<hr/>
			<div class="d-flex align-items-center justify-content-between">
				<div class="form-check">
					<input class="form-check-input" type="radio" name="flexRadioDefault" id="lightmode" checked>
					<label class="form-check-label" for="lightmode">亮</label>
				</div>
				<div class="form-check">
					<input class="form-check-input" type="radio" name="flexRadioDefault" id="darkmode">
					<label class="form-check-label" for="darkmode">暗黑</label>
				</div>
				<div class="form-check">
					<input class="form-check-input" type="radio" name="flexRadioDefault" id="semidark">
					<label class="form-check-label" for="semidark">反转</label>
				</div>
			</div>
			<hr/>
			<div class="form-check">
				<input class="form-check-input" type="radio" id="minimaltheme" name="flexRadioDefault">
				<label class="form-check-label" for="minimaltheme">淡色</label>
			</div>
			<hr/>
			<h6 class="mb-0">顶部栏样式</h6>
			<hr/>
			<div class="header-colors-indigators">
				<div class="row row-cols-auto g-3">
					<div class="col">
						<div class="indigator headercolor1" id="headercolor1"></div>
					</div>
					<div class="col">
						<div class="indigator headercolor2" id="headercolor2"></div>
					</div>
					<div class="col">
						<div class="indigator headercolor3" id="headercolor3"></div>
					</div>
					<div class="col">
						<div class="indigator headercolor4" id="headercolor4"></div>
					</div>
					<div class="col">
						<div class="indigator headercolor5" id="headercolor5"></div>
					</div>
					<div class="col">
						<div class="indigator headercolor6" id="headercolor6"></div>
					</div>
					<div class="col">
						<div class="indigator headercolor7" id="headercolor7"></div>
					</div>
					<div class="col">
						<div class="indigator headercolor8" id="headercolor8"></div>
					</div>
				</div>
			</div>
			<hr/>
			<h6 class="mb-0">侧边栏样式</h6>
			<hr/>
			<div class="header-colors-indigators">
				<div class="row row-cols-auto g-3">
					<div class="col">
						<div class="indigator sidebarcolor1" id="sidebarcolor1"></div>
					</div>
					<div class="col">
						<div class="indigator sidebarcolor2" id="sidebarcolor2"></div>
					</div>
					<div class="col">
						<div class="indigator sidebarcolor3" id="sidebarcolor3"></div>
					</div>
					<div class="col">
						<div class="indigator sidebarcolor4" id="sidebarcolor4"></div>
					</div>
					<div class="col">
						<div class="indigator sidebarcolor5" id="sidebarcolor5"></div>
					</div>
					<div class="col">
						<div class="indigator sidebarcolor6" id="sidebarcolor6"></div>
					</div>
					<div class="col">
						<div class="indigator sidebarcolor7" id="sidebarcolor7"></div>
					</div>
					<div class="col">
						<div class="indigator sidebarcolor8" id="sidebarcolor8"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!--wrapper中所需js-->
<!--底部-->
<div class="login-bottom-links" th:fragment="buttom">

	<a href="https://beian.miit.gov.cn/" target="_blank" class="link" >粤ICP备2023033184号</a>

	<br>

	<!--<a href="#">ToS</a>  - <a href="#">Privacy Policy</a>-->

</div>
<scripts>
	<!-- Bootstrap JS -->
	<script src="/static/js/bootstrap.bundle.min.js"></script>
	<!--plugins-->
	<script src="/static/js/jquery.min.js"></script>
	<script src="/static/plugins/metismenu/js/metisMenu.min.js"></script>
	<script src="/static/plugins/chartjs/js/Chart.min.js"></script>
	<script src="/static/plugins/chartjs/js/Chart.extension.js"></script>
	<!--notification js -->
	<script src="/static/plugins/notifications/js/notifications.min.js"></script>
	<!--app JS-->
	<script src="/static/js/app.js"></script>
	<script src="/static/js/none-getUserInfo.js"></script>
	<script>
		/**
		 * 用于加载页面是的优化处理
		 *
		 *
		 */
		// 获取要监听的元素
		let clickMeun = document.querySelectorAll(".has-arrow");

		clickMeun.forEach(element =>{
			// 创建一个 MutationObserver 实例
			const observer = new MutationObserver(function(mutationsList) {
				// 遍历所有变化
				for(const mutation of mutationsList) {
						mutation.target.nextElementSibling.classList.remove("menuClassHidedisplay");
						if(mutation.target.getAttribute("aria-expanded") == 'true'){
							element.nextElementSibling.classList.add("menuClassShow");
						}else{
							element.nextElementSibling.classList.remove("menuClassShow");
						}
				}
			});
			// 配置观察选项
			const config = { attributes: true, childList: false, subtree: false,attributeFilter:['aria-expanded'] };
			// 开始观察目标元素
			observer.observe(element, config);
		})
	</script>
</scripts>